---
tasks:
  main_ubuntu2004:
    name: build & test all
    platform: ubuntu2004
    environment:
      CC: clang
    build_flags:
    - "--host_platform=@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_5.0.201"
    - "--platforms=@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_5.0.201"
    build_targets:
    - "//buf/..."
    - "//c/..."
    - "//cpp/..."
    - "//csharp/..."
    - "//d/..."
    - "//doc/..."
    - "//fsharp/..."
    - "//go/..."
    - "//grpc-gateway/..."
    - "//java/..."
    - "//js/..."
    - "//php/..."
    - "//python/..."
    - "//rust/..."
    - "//scala/..."
    test_flags:
    - "--test_output=errors"
    - "--host_platform=@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_5.0.201"
    - "--platforms=@io_bazel_rules_dotnet//dotnet/toolchain:linux_amd64_5.0.201"
    test_targets:
    - "//example/routeguide:cpp_cpp"
    - "//example/routeguide:cpp_csharp"
    - "//example/routeguide:cpp_fsharp"
    - "//example/routeguide:cpp_go"
    - "//example/routeguide:cpp_java"
    - "//example/routeguide:cpp_js"
    - "//example/routeguide:cpp_python"
    - "//example/routeguide:cpp_rust"
    - "//example/routeguide:csharp_cpp"
    - "//example/routeguide:csharp_csharp"
    - "//example/routeguide:csharp_fsharp"
    - "//example/routeguide:csharp_go"
    - "//example/routeguide:csharp_java"
    - "//example/routeguide:csharp_js"
    - "//example/routeguide:csharp_python"
    - "//example/routeguide:csharp_rust"
    - "//example/routeguide:fsharp_cpp"
    - "//example/routeguide:fsharp_csharp"
    - "//example/routeguide:fsharp_fsharp"
    - "//example/routeguide:fsharp_go"
    - "//example/routeguide:fsharp_java"
    - "//example/routeguide:fsharp_python"
    - "//example/routeguide:fsharp_rust"
    - "//example/routeguide:go_cpp"
    - "//example/routeguide:go_csharp"
    - "//example/routeguide:go_fsharp"
    - "//example/routeguide:go_go"
    - "//example/routeguide:go_java"
    - "//example/routeguide:go_js"
    - "//example/routeguide:go_python"
    - "//example/routeguide:go_rust"
    - "//example/routeguide:java_cpp"
    - "//example/routeguide:java_csharp"
    - "//example/routeguide:java_fsharp"
    - "//example/routeguide:java_go"
    - "//example/routeguide:java_java"
    - "//example/routeguide:java_js"
    - "//example/routeguide:java_python"
    - "//example/routeguide:java_rust"
    - "//example/routeguide:js_cpp"
    - "//example/routeguide:js_csharp"
    - "//example/routeguide:js_fsharp"
    - "//example/routeguide:js_go"
    - "//example/routeguide:js_java"
    - "//example/routeguide:js_js"
    - "//example/routeguide:js_python"
    - "//example/routeguide:js_rust"
    - "//example/routeguide:python_cpp"
    - "//example/routeguide:python_csharp"
    - "//example/routeguide:python_fsharp"
    - "//example/routeguide:python_go"
    - "//example/routeguide:python_java"
    - "//example/routeguide:python_js"
    - "//example/routeguide:python_python"
    - "//example/routeguide:python_rust"
    - "//example/routeguide:rust_cpp"
    - "//example/routeguide:rust_csharp"
    - "//example/routeguide:rust_fsharp"
    - "//example/routeguide:rust_go"
    - "//example/routeguide:rust_java"
    - "//example/routeguide:rust_js"
    - "//example/routeguide:rust_python"
    - "//example/routeguide:rust_rust"
    - "//example/routeguide:scala_cpp"
    - "//example/routeguide:scala_csharp"
    - "//example/routeguide:scala_fsharp"
    - "//example/routeguide:scala_go"
    - "//example/routeguide:scala_java"
    - "//example/routeguide:scala_js"
    - "//example/routeguide:scala_python"
    - "//example/routeguide:scala_rust"
  main_macos:
    name: build & test all
    platform: macos
    environment:
      CC: clang
    build_flags:
    - "--copt=-DGRPC_BAZEL_BUILD"
    - "--features=-supports_dynamic_linker"
    - "--host_platform=@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_5.0.201"
    - "--platforms=@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_5.0.201"
    build_targets:
    - "//buf/..."
    - "//c/..."
    - "//cpp/..."
    - "//csharp/..."
    - "//d/..."
    - "//doc/..."
    - "//fsharp/..."
    - "//go/..."
    - "//grpc-gateway/..."
    - "//java/..."
    - "//js/..."
    - "//objc/..."
    - "//php/..."
    - "//python/..."
    - "//ruby/..."
    - "//scala/..."
    - "//swift/..."
    test_flags:
    - "--test_output=errors"
    - "--copt=-DGRPC_BAZEL_BUILD"
    - "--features=-supports_dynamic_linker"
    - "--host_platform=@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_5.0.201"
    - "--platforms=@io_bazel_rules_dotnet//dotnet/toolchain:darwin_amd64_5.0.201"
    test_targets:
    - "//example/routeguide:cpp_cpp"
    - "//example/routeguide:cpp_csharp"
    - "//example/routeguide:cpp_fsharp"
    - "//example/routeguide:cpp_go"
    - "//example/routeguide:cpp_java"
    - "//example/routeguide:cpp_js"
    - "//example/routeguide:cpp_python"
    - "//example/routeguide:cpp_ruby"
    - "//example/routeguide:csharp_cpp"
    - "//example/routeguide:csharp_csharp"
    - "//example/routeguide:csharp_fsharp"
    - "//example/routeguide:csharp_go"
    - "//example/routeguide:csharp_java"
    - "//example/routeguide:csharp_js"
    - "//example/routeguide:csharp_python"
    - "//example/routeguide:csharp_ruby"
    - "//example/routeguide:fsharp_cpp"
    - "//example/routeguide:fsharp_csharp"
    - "//example/routeguide:fsharp_fsharp"
    - "//example/routeguide:fsharp_go"
    - "//example/routeguide:fsharp_java"
    - "//example/routeguide:fsharp_python"
    - "//example/routeguide:fsharp_ruby"
    - "//example/routeguide:go_cpp"
    - "//example/routeguide:go_csharp"
    - "//example/routeguide:go_fsharp"
    - "//example/routeguide:go_go"
    - "//example/routeguide:go_java"
    - "//example/routeguide:go_js"
    - "//example/routeguide:go_python"
    - "//example/routeguide:go_ruby"
    - "//example/routeguide:java_cpp"
    - "//example/routeguide:java_csharp"
    - "//example/routeguide:java_fsharp"
    - "//example/routeguide:java_go"
    - "//example/routeguide:java_java"
    - "//example/routeguide:java_js"
    - "//example/routeguide:java_python"
    - "//example/routeguide:java_ruby"
    - "//example/routeguide:js_cpp"
    - "//example/routeguide:js_csharp"
    - "//example/routeguide:js_fsharp"
    - "//example/routeguide:js_go"
    - "//example/routeguide:js_java"
    - "//example/routeguide:js_js"
    - "//example/routeguide:js_python"
    - "//example/routeguide:js_ruby"
    - "//example/routeguide:python_cpp"
    - "//example/routeguide:python_csharp"
    - "//example/routeguide:python_fsharp"
    - "//example/routeguide:python_go"
    - "//example/routeguide:python_java"
    - "//example/routeguide:python_js"
    - "//example/routeguide:python_python"
    - "//example/routeguide:python_ruby"
    - "//example/routeguide:ruby_cpp"
    - "//example/routeguide:ruby_csharp"
    - "//example/routeguide:ruby_fsharp"
    - "//example/routeguide:ruby_go"
    - "//example/routeguide:ruby_java"
    - "//example/routeguide:ruby_js"
    - "//example/routeguide:ruby_python"
    - "//example/routeguide:ruby_ruby"
    - "//example/routeguide:scala_cpp"
    - "//example/routeguide:scala_csharp"
    - "//example/routeguide:scala_fsharp"
    - "//example/routeguide:scala_go"
    - "//example/routeguide:scala_java"
    - "//example/routeguide:scala_js"
    - "//example/routeguide:scala_python"
    - "//example/routeguide:scala_ruby"
